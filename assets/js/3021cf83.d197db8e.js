"use strict";(self.webpackChunkreact_bearer_auth_context=self.webpackChunkreact_bearer_auth_context||[]).push([[538],{2418:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var r=a(7462),n=a(3366),i=(a(7294),a(3905)),o=["components"],l={id:"getting-started",custom_edit_url:null,sidebar_label:"Getting Started",slug:"/"},s="Bearer Auth React Context",u={unversionedId:"getting-started",id:"getting-started",isDocsHomePage:!1,title:"Bearer Auth React Context",description:"(Now that's a mouthful.)",source:"@site/docs/getting-started.mdx",sourceDirName:".",slug:"/",permalink:"/bearer-auth-react-context/",editUrl:null,tags:[],version:"current",frontMatter:{id:"getting-started",custom_edit_url:null,sidebar_label:"Getting Started",slug:"/"},sidebar:"sidebar",next:{title:"Handling Refresh",permalink:"/bearer-auth-react-context/handling-refresh"}},p=[{value:"Getting Started",id:"getting-started",children:[]},{value:"Sample app",id:"sample-app",children:[]}],c={toc:p};function d(e){var t=e.components,a=(0,n.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"bearer-auth-react-context"},"Bearer Auth React Context"),(0,i.kt)("p",null,"(Now that's a mouthful.)"),(0,i.kt)("p",null,"Bearer Auth React Context is a React Context meant to simplify integrations with APIs using Bearer Token Authorization."),(0,i.kt)("p",null,"Bearer Token Authentication a common authentication method. For details, see ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/rfc6750"},"RFC6750"),", or various other online resources."),(0,i.kt)("p",null,"While handling bearer token itself is straightforward, it needs to be refreshed, and that's where things get icky.\nI couldn't really find a sensible way of doing that in React (for example when using React-Query), hence this library."),(0,i.kt)("p",null,"Bearer Auth React Context provides React Context and associated hooks that:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"are network library (fetch, axios, etc.) agnostic"),(0,i.kt)("li",{parentName:"ul"},"automatically handle token refresh"),(0,i.kt)("li",{parentName:"ul"},"handles various edge cases (e.g.: if two requests fail at the same time, only one refresh request is sent)"),(0,i.kt)("li",{parentName:"ul"},"store Bearer auth token in ",(0,i.kt)("inlineCode",{parentName:"li"},"localStorage")),(0,i.kt)("li",{parentName:"ul"},"provide convenient wrapper for network calls"),(0,i.kt)("li",{parentName:"ul"},"provide callbacks for when token refresh succeeds or fails"),(0,i.kt)("li",{parentName:"ul"},"plays nice with React-Query")),(0,i.kt)("h2",{id:"getting-started"},"Getting Started"),(0,i.kt)("p",null,"You need a working React project. Bootstrapped with Next.js, Create React App, manually, whatever your prefer - as long as it's React."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Install ",(0,i.kt)("inlineCode",{parentName:"li"},"bearer-auth-react-context")," with your favourite package manager, e.g.:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add bearer-auth-react-context\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Wrap your app with ",(0,i.kt)("inlineCode",{parentName:"li"},"<BearerAuthContextProvider>"),", e.g.:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"const App = () => {\n  return (\n    <BearerAuthContextProvider\n      fetcherConfig={fetcherConfig}\n      hasTokenExpired={hasTokenExpired}\n      refreshHandler={handleTokenRefresh}\n    >\n      <MainPage />\n    </BearerAuthContextProvider>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Provide required props:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fetcherConfig")," - generic configuration object (typically including API URL) passed to each query function"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"hasTokenExpired")," - function used to decide whether request failed because of expired token"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"refreshHandler")," - function that performs actual token refresh")),(0,i.kt)("p",null,"For more details, see ",(0,i.kt)("a",{parentName:"p",href:"/handling-refresh"},"Handling Refresh"),"."),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Wrap all your API calls with ",(0,i.kt)("inlineCode",{parentName:"p"},"useBearerAuthWrapper()"),". For more details, see ",(0,i.kt)("a",{parentName:"p",href:"/network-calls"},"Making Network Calls"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"You're good to go!"))),(0,i.kt)("h2",{id:"sample-app"},"Sample app"),(0,i.kt)("p",null,"Living, breathing example is available ",(0,i.kt)("a",{parentName:"p",href:"https://bearer-auth-react-context-demo.herokuapp.com/"},"here"),".\nLog in as ",(0,i.kt)("inlineCode",{parentName:"p"},"test"),"/",(0,i.kt)("inlineCode",{parentName:"p"},"test"),", open browser devtools and click away. Token expires every 10 seconds."))}d.isMDXComponent=!0}}]);